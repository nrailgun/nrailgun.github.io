# ALL

- 基本原则（只有踩过坑才知道以下道理多么深刻）
  - 处理全部错误/异常（不可恢复的异常要保证正确料理处理器后事）。
  - 最好把所有的 warning 全部用 if 检查小心去掉，而不是假装看不见或者乱 cast type。
  - 多打 log，log 信息尽量丰富。
  - 尽量少写全局变量，写了也尽量不要用全局 ctor。
- **操作线上机器要十分小心，不要传错了参数！**
- cache 记得要定期释放。
- concurrent queue 小心 consumer 阻塞，要通过参数控制大小。如果消费者在同一个机器，也要提防消费者阻塞导致的隐性的队列大小（出队列后未消耗掉，相当于队列申请的内存未释放）。
- 代码要调用尽量避免循环调用，尤其是在回调中。很可能发生难以估计的潜在副作用。
- 有些需求直接实现比较棘手，可以换一种思路用人力处理问题。
- 不变式
  - 状态转移所期望的行为可能丢失吗？可能发生意外的行为吗？理想上，应该明确功能的假定条件和不变式；但现实中，它们往往随着迭代而被打破。
  - 由于假定条件和不变式经常被打破，需要提前考虑线上出错数据要如何修正，尽量选取数据易修正的方案。
  - 函数要注意可能的重入，与意外上下文错误（如失误的重复调用）。即使没有发生协程调度，也要小心意外的上下文改变（例如时间）。
- stateful 的 web api failure reported 之后是不能随便 retry 的。
- 命名
  - 一种事物应该只拥有一个命名，一个命名应该只对应一种事物。
  - 尽量避免使用数字开头命名文件，否则可能与模块命名不一致，或者在反射时发生麻烦。
  - 如果存在多种不同的整型标识符，很可能错误传递导致悲剧。使不同标识符的类型/变量命名显著不同（例如不要使用 UId / UserId）。即使使用整型，也尽量定义别名，方便编译器 / 解释器检查。
- 不要设计无法校验合法性的句柄。典型的例子是悬垂指针，或者是无法知晓定时器是否已经触发的定时器编号。
- 进度紧急之时坚决不接受无明确意义的接口改动，尤其是带有语义改动的。
- 并不是所有的 demo 都适合乱怼。如果 demo 超出了 3k 行并且涉及多个模块，很可能不合适。
- 对于一个未了解的领域，尽量方方面面先进行调研再开始编写代码，不要写到一半发现此路不通。
- 后台系统需要使用一些奇怪的魔法数字，比如 batch call 的 batch size，建议直接问开发者，不要自己胡乱设置。
- Leader 给的任务不一定是最好的 solution，甚至可能很奇怪，也许是背后有其他目标或者痛点，要更多的关注背后的动机。

# C++

- buffered io obj 要小心 message 小于 buffer 浪费内存的情况。
- 一定要 raii。
- `std::move` 之后最好验证下确实被移动了，比如持有的 `vector` 长度归零。
- 一边写代码，一定要一边预估数据量，并运行验证其符合预期。
- 比较长的流程，一定要打 log 分段记录各种开销（特别是时间开销）。
- 无限重试是个烂主意，很容易雪崩。就算无限重试也必须加 backoff。

# 学习

- Google 搜索去学习一个新领域知识时，注意切换排列组合各种关键字（包括中文），不要让 google 某些关键字搜索结果限制了思维（例如搜索 *tensorflow parameter server* 还可以去掉 *tensorflow* 搜索看，搜索 *batch norm distributed* 也可以试试 *batch norm parameter server*）。搜索的时候尽量把相关内容尽量深入看完。实在不行找本《深入理解 XXX》看。
- 做方案之前，先尽量完全了解全部业界一流方案。
- 看文档尽可能把文档看齐全，有些小问题可能在文档的后部分的到了解释，重要的功能可能有更好的解决方案，又或者是 TF 的 BN 把 update moving average 藏在注释角落里。
- 面对一个问题时，不要首先纠结于一个细节应该怎么处理（例如某个 callback 中回传的参数应该如何取得某些信息）；而是应该总览全局，考虑每一步大致应该怎么做，然后再去纠结这些 API，最后才是写代码。
- 鼠标指内容可以强迫大脑跟上强迫阅读思考。
- 阅读开源代码建议照着文档看，不要直接跳下去看底层 api，先总揽全局。

# 工作

- 主动思考自己负责的模块存在的问题，并且进行有意识解决优化。
- 沉淀出切实有效解决问题的方法论。
- 熟悉常用操作系统及相关开发语言。
- 熟悉软件架构知识。

---

- $\ast$ 熟悉监控相关工作并能在实际工作中灵活应用。实践灰度策略。
- $\ast$ 熟悉并能优化服务。
- 能够定位性能问题并进行调优，考虑设备带宽成本。
- 了解并在指导下进行系统柔性可用，过载保护的设计和实现。
- 能独立进行复杂业务系统的开发。
- 了解接口产品特性和主要技术架构。

---

- $\ast$ 分析思考目前架构存在问题，对比现有方案与模型，提出创新／应用先进架构，开发效率／性能效果提升明显,  理解可用性意义，灵活运用柔性设计。
- $\ast$ 深挖运营数据，分析业务问题，深究问题原因，对比业界方案，提出创新/符合业务特点优化措施，进行数据验证，性能效果提升明显。
- $\ast$ 熟练掌握海量运营中后台架构设计方法，并对前台知识有所了解。
- 通过发表文章与分享，具有一定的 BG 影响力。

# 想法

- 你可以看穿历史的进程，可你却跳不出。
- 在行动之前，注意信息收集，切勿想当然。一个行业或者领域可能业务开展很不理想，即使当前在你的地区很不错，在另一个地区也不一定成立。当信息收集不完善，决策就变成了纯赌博（虽然完全收集是不可能的）。
- 资本市场价格取决于供需关系，而盈利则需要考虑成本。行业某些畸形发展（价格战，技术战）导致成本提高盈利能力降低，进而导致资本撤离。对于人也是同理，你在市场出卖劳务的价格，不取决于能力门槛，而取决于市场需求和投资热情。
- 物品的价值对于不同的用户是不同的，避免按照自身盲目揣测。例子便是中大毕业典礼门票和网易游戏新春礼包。